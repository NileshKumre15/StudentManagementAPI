<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</head>
<body class="p-4">
    <!--<div class="container">
        <h1 class="mb-4">Student Management</h1>-->

        <!-- Form -->
        <!--<form id="studentForm" class="needs-validation" novalidate>
            <input type="hidden" id="studentId">
            <div class="mb-3">
                <label>Name</label>
                <input type="text" id="name" class="form-control" required>
                <div class="invalid-feedback">Name is required.</div>
            </div>
            <div class="mb-3">
                <label>Age</label>
                <input type="number" id="age" class="form-control" required>
                <div class="invalid-feedback">Age is required and must be a number.</div>
            </div>
            <div class="mb-3">
                <label>Email</label>
                <input type="email" id="email" class="form-control" required>
                <div class="invalid-feedback">Valid email is required.</div>
            </div>
            <button type="submit" class="btn btn-primary">Save</button>
        </form>

        <hr class="my-4">-->

        <!-- Student Table -->
        <!--<table class="table table-bordered table-dark">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Age</th>
                    <th>Email</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="studentTable"></tbody>
        </table>

        <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 9999">
            <div id="liveToast" class="toast text-bg-success" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-header">
                    <strong class="me-auto">Success</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body" id="toastMessage">
                    Action completed successfully.
                </div>
            </div>
        </div>

    </div>-->

     <div class="container py-5">
        <div class="text-center mb-5">
            <h1 class="display-5 fw-bold text-primary">Student Management System</h1>
            <p class="lead">Manage student records easily.</p>
        </div>

        <div class="row justify-content-center">
            <div class="col-md-4">
                <div class="card shadow-lg border-0">
                    <div class="card-body text-center">
                        <h5 class="card-title">📄 View Students</h5>
                        <p class="card-text">See all students.</p>
                        <a href="list.html" class="btn btn-outline-primary w-100">Go to Student List</a>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mt-4 mt-md-0">
                <div class="card shadow-lg border-0">
                    <div class="card-body text-center">
                        <h5 class="card-title">➕ Add Student</h5>
                        <p class="card-text">Add a new student validation.</p>
                        <a href="create.html" class="btn btn-outline-success w-100">Add New Student</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center mt-5">
            <small class="text-muted">Built with ASP.NET Core 8 Web API + Bootstrap 5</small>
        </div>
    </div>

    <!-- Scripts -->
    <!--<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script>
        const API_URL = '/api/students';

        // Load all students
        function loadStudents() {
            $.get(API_URL, function (data) {
                let rows = '';
                data.forEach(s => {
                    rows += `
                            <tr>
                                <td>${s.name}</td>
                                <td>${s.age}</td>
                                <td>${s.email}</td>
                                <td>
                                    <button class="btn btn-sm btn-info" onclick="editStudent(${s.id})">Edit</button>
                                    <button class="btn btn-sm btn-danger" onclick="deleteStudent(${s.id})">Delete</button>
                                </td>
                            </tr>`;
                });
                $('#studentTable').html(rows);
            });
        }

        // Add or Update student
        $('#studentForm').submit(function (e) {
            e.preventDefault();
            const id = $('#studentId').val();
            const student = {
                name: $('#name').val(),
                age: parseInt($('#age').val()),
                email: $('#email').val()
            };

            if (id) {
                // Update
                $.ajax({
                    url: `${API_URL}/${id}`,
                    type: 'PUT',
                    contentType: 'application/json',
                    data: JSON.stringify({ id: parseInt(id), ...student }),
                    success: () => {
                        resetForm();
                        loadStudents();
                    }
                });
            } else {
                // Add
                $.post({
                    url: API_URL,
                    contentType: 'application/json',
                    data: JSON.stringify(student),
                    success: () => {
                        resetForm();
                        loadStudents();
                    }
                });
            }
        });

        // Edit
        function editStudent(id) {
            $.get(`${API_URL}/${id}`, function (s) {
                $('#studentId').val(s.id);
                $('#name').val(s.name);
                $('#age').val(s.age);
                $('#email').val(s.email);
            });
        }


        // Delete
        function deleteStudent(id) {
            if (confirm('Are you sure?')) {
                $.ajax({
                    url: `${API_URL}/${id}`,
                    type: 'DELETE',
                    success: () => loadStudents()
                });
            }
        }

        // Reset form
        function resetForm() {
            $('#studentForm')[0].reset();
            $('#studentId').val('');
        }

        // Initial load
        $(document).ready(() => {
            loadStudents();
        });

        // Bootstrap form validation
        (function () {
            'use strict';
            const form = document.querySelector('#studentForm');
            form.addEventListener('submit', function (event) {
                if (!form.checkValidity()) {
                    event.preventDefault();
                    event.stopPropagation();
                }

                form.classList.add('was-validated');
            }, false);
        })();

        function showToast(message) {
            $('#toastMessage').text(message);
            const toast = new bootstrap.Toast(document.getElementById('liveToast'));
            toast.show();
        }


        success: () => {
            resetForm();
            loadStudents();
            showToast("Student added successfully!");
        }

    </script>-->
</body>
</html>
